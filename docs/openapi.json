{"openapi":"3.0.2","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/":{"post":{"summary":"Read Root","description":"Test Route","operationId":"read_root__post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/janus/start":{"post":{"summary":"Start Janus","description":"Starts the Janus WebRTC server\n\nIf returns success but behavior is not as expected:\n\n1. Check that STUN server config/connection is correct\n\n2. Call force_stop_webrtc and try again\n\n3. Call reset_usb and try again","operationId":"start_janus_janus_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/janus/stop":{"post":{"summary":"Stop Janus","description":"Stops a Janus WebRTC server that was started with /janus/start\n\nIf returns success but behavior is not as expected:\n\n1. Force-stop WebRTC (using the appropriate API call) instead","operationId":"stop_janus_janus_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/janus/force_stop":{"post":{"summary":"Force Stop Janus","description":"Runs pkill with SIGINT on any Janus process on the machine","operationId":"force_stop_janus_janus_force_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/janus/force_exists":{"post":{"summary":"Force Exists Webrtc","description":"Runs pgrep, looking for any Janus process on the device","operationId":"force_exists_webrtc_janus_force_exists_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/audio/start":{"post":{"summary":"Start Audio","description":"Starts the gstreamer pipeline, allowing for audio to be captured\n\nFor audio to be sent, requires the Janus WebRTC server to be running\n\nIf returns success but behavior is not as expected:\n\n1. Check that ALSA config is correct\n\n2. Call force_stop_audio and try again\n\n3. Call reset_usb and try again","operationId":"start_audio_audio_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/audio/stop":{"post":{"summary":"Stop Audio","description":"Stops a gstreamer pipeline that was started /audio/start\n\nIf returns success but behavior is not as expected:\n\n1. Force-stop audio (using the appropriate API call) instead","operationId":"stop_audio_audio_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/audio/force_stop":{"post":{"summary":"Force Stop Audio","description":"Runs pkill with SIGINT on any gstreamer process on the device","operationId":"force_stop_audio_audio_force_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/audio/force_exists":{"post":{"summary":"Force Exists Audio","description":"Runs pgrep, looking for any Janus process on the device","operationId":"force_exists_audio_audio_force_exists_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/set_format":{"post":{"summary":"Set Format","description":"Stops janus and sets the V4L2 video format\n\nbody:\n\n    width (int): video resolution width (example: 1920)\n\n    height (int): video resolution height (example: 1080)\n\n    pixelformat (str): video pixel format (example: MJPG)\n\n    fps (int): framerate (example: 30)\n\nIf returns success but behavior is not as expected:\n\n1. Check that STUN server config/connection is correct\n\n2. Call force_stop_webrtc and try again\n\n3. Call reset_usb and try again","operationId":"set_format_set_format_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoFormat"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/get_format":{"post":{"summary":"Get Format","description":"Gets the v4l2 format using v4l2-ctl","operationId":"get_format_get_format_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/screenshot":{"get":{"summary":"Screenshot","description":"Stops WebRTC service (if it is on), takes and returns a screenshot,\nresets the USB, then restarts WebRTC service\n\nparams:\n\n    process (str, optional): ffmpeg OR cv2 (default: cv2)\n\n    inp_fmt (str, optional): input format jpg or png (default: png)\n\n    out_fmt (str, optional): output format jpg or png (default: png)\n\n    width (int, optional): resolution width (default: 1920)\n\n    height (int, optional): resolution height (default: 1080)","operationId":"screenshot_screenshot_get","parameters":[{"required":false,"schema":{"title":"Process","type":"string","default":"cv2"},"name":"process","in":"query"},{"required":false,"schema":{"title":"Inp Fmt","type":"string","default":"png"},"name":"inp_fmt","in":"query"},{"required":false,"schema":{"title":"Out Fmt","type":"string","default":"png"},"name":"out_fmt","in":"query"},{"required":false,"schema":{"title":"Width","type":"integer","default":1920},"name":"width","in":"query"},{"required":false,"schema":{"title":"Height","type":"integer","default":1080},"name":"height","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/fast_screenshot/start":{"post":{"summary":"Fast Screenshot Mode Start","description":"Stops Janus. Enters state where screenshots can be retrieved quicker\nthan with the normal screenshot call.\n\n(Janus cannot be used while in this state)\n\nbody:\n\n    inp_fmt (str, optional): input format jpg or png (default: png)\n\n    out_fmt (str, optional): output format jpg or png (default: png)\n\n    width (int, optional): resolution width (default: 1920)\n\n    height (int, optional): resolution height (default: 1080)","operationId":"fast_screenshot_mode_start_fast_screenshot_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FastScreenshotFormat"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/fast_screenshot/stop":{"post":{"summary":"Fast Screenshot Mode Stop","description":"Exits fast screenshot mode","operationId":"fast_screenshot_mode_stop_fast_screenshot_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/fast_screenshot":{"get":{"summary":"Fast Screenshot","description":"Takes a screenshot while in fast screenshot mode.\n\nShould be quicker than the normal screenshot method","operationId":"fast_screenshot_fast_screenshot_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/recording/start":{"post":{"summary":"Recording Start","description":"Stops janus and starts a recording\n\nbody:\n\n    width (int): video resolution width (example: 1920)\n\n    height (int): video resolution height (example: 1080)\n\n    pixelformat (str): video pixel format (example: MJPG)\n\n    fps (int): framerate (example: 30)\n\n    length (int): length of the recording (seconds)\n\nIf returns success but behavior is not as expected:\n\n1. Call reset_usb and try again","operationId":"recording_start_recording_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordingFormat"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recording/stop":{"post":{"summary":"Recording Stop","description":"Stops recording early","operationId":"recording_stop_recording_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/recording/delete/{filename}":{"post":{"summary":"Recording Delete","description":"Deletes a recording\n\nArgs:\n    filename (str): filename","operationId":"recording_delete_recording_delete__filename__post","parameters":[{"required":true,"schema":{"title":"Filename","type":"string"},"name":"filename","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recording/list":{"post":{"summary":"Recordings List","description":"Returns a list of all recordings stored on the Pi","operationId":"recordings_list_recording_list_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/status":{"post":{"summary":"Status Webrtc","description":"Gets status of WebRTC (Janus) and audio (gstreamer) processes","operationId":"status_webrtc_status_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/reset_usb":{"post":{"summary":"Reset Usb","description":"Resets the USB device corresponding with the capture card\n\nUseful for troubleshooting","operationId":"reset_usb_reset_usb_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"FastScreenshotFormat":{"title":"FastScreenshotFormat","type":"object","properties":{"inp_fmt":{"title":"Inp Fmt","type":"string","default":"png"},"out_fmt":{"title":"Out Fmt","type":"string","default":"png"},"width":{"title":"Width","type":"integer","default":1920},"height":{"title":"Height","type":"integer","default":1080}},"description":"fast screenshot format"},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"RecordingFormat":{"title":"RecordingFormat","required":["width","height","pixelformat","fps","length"],"type":"object","properties":{"width":{"title":"Width","type":"integer"},"height":{"title":"Height","type":"integer"},"pixelformat":{"title":"Pixelformat","type":"string"},"fps":{"title":"Fps","type":"integer"},"length":{"title":"Length","type":"integer"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"VideoFormat":{"title":"VideoFormat","required":["width","height","pixelformat","fps"],"type":"object","properties":{"width":{"title":"Width","type":"integer"},"height":{"title":"Height","type":"integer"},"pixelformat":{"title":"Pixelformat","type":"string"},"fps":{"title":"Fps","type":"integer"}},"description":"v4l2-ctl video format"}}}}